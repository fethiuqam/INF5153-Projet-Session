@startuml

class Patient {
    - nom : String 
    - prenom : String
    - dateNaissance : Date 
    - villeNaissance : String
    - noAssurance : String
    + getCoordonnees() : Coordonnees
}

class Coordonnees {
    - adresse : String
    - telephone : String
    - courriel : String
    + setAdresse (adresse : String)
    + setTelephone (Telephone : String )
    + setCourriel (courriel : String)
}

enum Genre {
    MASCULIN
    FEMININ
    AUTRE
}

class Dossier {
    + AjouterVisite (visite : Visite)
    + AjouterAntecedent (antecedent: Antecedent)
    + getVisites() : List<Visite>
    + getAntecedents() : List<Antecedent>
    + getTraitements() : List<Traitement>
}

class Visite {
    - date : Date
    - resume : String
    - notes : List<String>
    + setResume (resume: String)
    + setDiagnostic(dg: Diagnostic)
    + setTraitement(trt: Traitement)
    + ajouterNote(note: String)
    + getTraitement () : Traitement
}

class Antecedent {
    - debut : Date
    - fin : Date [0..1]
    + setDebut(date : Date)
    + setFin(date : Date)
    + setDiagnostic(dg: Diagnostic)
    + setTraitement(trt: Traitement)
}

interface IDiagnostic {
    getDescription(): String
}

class Diagnostic {
    - description : String
}

interface ITraitement {
    getDescription(): String
}

class Traitement {
    - description : String
}

class Medecin {
    - nom : String 
    - prenom : String
    - permis : String
    - specialite : String
}

class Etablissement {
    - id : String
    - description : String
}

class Utilisateur { 
    - username : String 
    - password : String 
    } 

Interface SourceDonnees {
    
}

interface Recherchable {
    + findbyId(id : String) : Optional<T>
    + findbyUsernameAndPassword (username : String, password: String) : Optional<T>
}

interface Modifiable {
    + update(t : T)
}

class Session {
    - modified : boolean
    + telechargerDossier(noAss : String)
    + enregistrerDossier()
    + creerVisite()
    + creerAntecedent()
    + annulerModification()
    + getVisitesPrescripteur() : List<Visite>
    + getVisitesHistorique() : List<Visite>
    + getAntecedentsPrescripteur() : List<Antecedent>
    + getAntecedentsHistorique() : List<Antecedent>
    + getTraitements() : List<Traitement>
}

interface authentifiable {
    + login() ; boolean
}

class ConnexionVue {
}

class ConnexionControleur {
    - validerSaisie()
    + seConnecter()
}

class PatientVue{

}

class PrescripteurVue {

}

class HistoriqueVue {

}

class PatientControleur {
    + afficherPatient()
}

abstract class AffichageControleur{
    + afficherVisites()
    + afficherAntecedents()
}

class PrescripteurControleur {
    + creerVisite()
    + enregistrerVisite()
    + ajouterAntecedent()
    + enregistrerNouvelAntecedent()
}

class HistoriqueControleur {
    + afficherTraitements()
}

'class Main {
'    + {static} main (args : String[])
'}

Patient *--> "1\ncoordonnées" Coordonnees
Patient #--> "0..2\nparents" Patient
Patient #--> "1\ngenre" Genre

Dossier *--> "*\nvisites" Visite
Dossier *--> "*\nantécédents" Antecedent
Dossier *--> "1\npatient" Patient

Visite *--> "0..1\ndiagnostic" IDiagnostic
Visite *--> "0..1\ntraitement" ITraitement
Visite #--> "1\nmedecin" Medecin

Antecedent #--> "1\ntraitant" Medecin
Antecedent #--> "1\diagnostic" IDiagnostic
Antecedent #--> "1\ntraitement" ITraitement

IDiagnostic <|.. Diagnostic
ITraitement <|.. Traitement

Medecin #--> "1\netablissement" Etablissement



Session *--> "0..1\ndossier" Dossier

Session -> SourceDonnees
Session *--> "0..1\nnouvelle visite" Visite
Session *--> "0..1\nnouvel antecedent" Antecedent
Session *--> "0..1\nutilisateur" Utilisateur 
Session .l.|> authentifiable
Session #--> "0..1\nprescripteur" Medecin

SourceDonnees .d.|> Modifiable
SourceDonnees  .|> Recherchable


ConnexionVue -- ConnexionControleur
PatientVue --PatientControleur
PrescripteurVue -- PrescripteurControleur
HistoriqueVue -- HistoriqueControleur 

ConnexionControleur #--> Session
PatientControleur #--> Session
PrescripteurControleur #--> Session
HistoriqueControleur #--> Session


AffichageControleur <|-- PrescripteurControleur
AffichageControleur <|-- HistoriqueControleur

'Main -> ConnexionVue
'Main --> ConnexionControleur
'Main --> Session

@enduml