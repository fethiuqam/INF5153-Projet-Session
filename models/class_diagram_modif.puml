@startuml

class Patient {
    - nom : String 
    - prenom : String
    - dateNaissance : Date 
    - villeNaissance : String
    - noAssurance : String
    + getCoordonnees() : Coordonnees
}

class Coordonnees {
    - adresse : String
    - telephone : String
    - courriel : String
    + setAdresse (adresse : String)
    + setTelephone (Telephone : String )
    + setCourriel (courriel : String)
}

enum Genre {
    MASCULIN
    FEMININ
    AUTRE
}

class Dossier {
    + AjouterVisite (visite : Visite)
    + AjouterAntecedent (medecin: Medecin, dg: Diagnostic, trt: Traitement)
    + getVisites() : List<Visite>
    + getAntecedents() : List<Antecedent>
    + getTraitements() : List<Traitement>
}

class Visite {
    - date : Date
    - resume : String
    - notes : List<String>
    + setResume (resume: String)
    + ajouterDiagnostic(dg: Diagnostic)
    + ajouterTraitement(trt: Traitement)
    + ajouterNote(note: String)
    +getTraitement () : traitement : Traitement
}

class Antecedent {
    - debut : Date
    - fin : Date [0..1]
    + setDebut(date : Date)
    + setFin(date : Date)
    + setDiagnostic()
    + setTraitement()
}


class Diagnostic {
    - description : String
}

class Traitement {
    - description : String
}

class Medecin {
    - nom : String 
    - prenom : String
    - permis : String
    - specialite : String
    - etablissement : String
}

abstract Utilisateur { 
    - username : String 
    - password : String 
    } 

class Prescripteur { 
    - nom : String 
    - prenom : String 
    - permis : String 
    - specialite : String 
    - etablissement : String
}

class SourceDonnees {
    
}

interface Recherchable {
    + findbyId(id : String) : Optional<T>
    + findbyUsernameAndPassword (username : String, password: String) : Optional<T>
}

interface Modifiable {
    + update(t : T)
}

class Session {
    + telechargerDossier(noAss : String)
    + enregistrerDossier()
    + getPatient () : Patient
    + creerVisite ()
    + AjouterAntecedent (medecin: Medecin, dg: Diagnostic, trt: Traitement)
    + getVisites() : List<Visite>
    + getAntecedents() : List<Antecedent>
    + getTraitements() : List<Traitement>
}

interface authentifiable {
    + login()
}

class ConnexionVue {
}

class ConnexionControleur {
    - validerSaisie()
}

class PatientVue{

}

class PrescripteurVue {

}

class HistoriqueVue {

}

class PatientControleur {

}

class PrescripteurControleur {

}

class HistoriqueControleur {

}

Patient *--> "1\ncoordonnées" Coordonnees
Patient #--> "0..2\nparents" Patient
Patient #--> "1\ngenre" Genre

Dossier *--> "*\nvisites" Visite
Dossier *--> "*\nantécédents" Antecedent
Dossier *--> "1\npatient" Patient

Visite *--> "0..1\ndiagnostic" Diagnostic
Visite *--> "0..1\ntraitement" Traitement
Visite #--> "1\nmedecin" Medecin

Antecedent #--> "1\ntraitant" Medecin
Antecedent #--> "1\diagnostic" Diagnostic
Antecedent #--> "1\ntraitement" Traitement

Session --> "0..1\ndossier" Dossier

Session -> SourceDonnees
Session --> "0..1\nnouvelle visite" Visite
Session *--> "0..1\nutilisateur" Utilisateur 
Session .l.|> authentifiable

SourceDonnees .d.|> Modifiable
SourceDonnees  .|> Recherchable


ConnexionVue -- ConnexionControleur
PatientVue --PatientControleur
PrescripteurVue -- PrescripteurControleur
HistoriqueVue -- HistoriqueControleur 

ConnexionControleur --> Session
PatientControleur --> Session
PrescripteurControleur --> Session
HistoriqueControleur --> Session

Utilisateur <|-- Prescripteur 


@enduml